<mat-card class="full-width">

    <mat-card-header>
    </mat-card-header>
    <mat-card-content >

        <mat-tab-group  style="background-color: rgba(238, 238, 238, 0.438);">
            <mat-tab label="Pedido">


                <mat-card class="full-width" >
                    <div class="row g-0 p-3">

                        <div class="col-4 p-4">
                            <p style="padding-bottom: 10px;"><strong>Número Pedido:</strong> {{ datos.id }}</p>
                            <p style="padding-bottom: 10px;"><strong>Realizado en:</strong> {{ datos.fechaPedido | date :"dd/MM/YYYY"}}</p>
                            <p style="font-weight: 500;padding-bottom: 10px"><strong>Total:</strong> {{ grandTotal | currency:"USD"}}</p>
                            <p><strong>Estado:</strong> <span style="padding:5px 10px 5px 10px; border-radius: 8px;margin-left: 8px;" [ngStyle]="{'background-color': getBackgroundColor(estadoPedido)}">{{ estadoPedido }}</span> </p>
                        
                        </div>
                        <div class="col-8">
        
                            <mat-card class="full-width p-3">
                                <mat-tab-group style="font-weight: 100;">
                                    <mat-tab label="Cliente">
                                        <div class="row g-0">
                                            <div class="col-1"></div>
                                            <div class="col-6" style="padding-top: 25px;">
                                                <p><strong>Nombre:</strong>  {{ datos.usuario.nombre }}</p>
                                                <p><strong>Correo:</strong>  {{ datos.usuario.email }}</p>
                                                <p><strong>Contacto:</strong> {{ datos.usuario.telefono }}</p>
                                            </div>
                                            <div class="col-3"  style="padding-top: 10px;">
                                                <p style="font-weight: 400;">Método Pago</p>
                                                <hr>
                                                <p><strong>Tipo:</strong> {{ datos.metodoPago.tipo }}</p>
                                                <p><strong>Tarjeta:</strong> ●●●● {{ datos.metodoPago.numTajeta.slice(-4) }}</p>
                                            </div>
                                        </div>
                                    </mat-tab>
                                    <mat-tab label="Entrega">
                                        <div class="row g-0" style="padding-top: 27px;">
                                            <div class="col-1"></div>
                                            <div class="col-6">
                                                <p><strong>Provincia:</strong> {{ provincia }}</p>
                                                <p><strong>Cantón:</strong> {{ canton }}</p>
                                                <p><strong>Distrito:</strong> {{ distrito }}</p>
                                            </div>
                                            <div class="col-5">
                                                <p><strong>Dirección Exacta</strong> {{ datos.direccion.exacta }}</p>
                                                <p><strong>Código Postal:</strong> {{ datos.direccion.codigoPostal }}</p>
                                                <p><strong>Contacto:</strong> {{ datos.direccion.telefono }}</p>
                                            </div>
                                        </div>
                                    </mat-tab>
                                </mat-tab-group>    
                            </mat-card>
                        </div>
                      
                    </div>
                
                <div>
                    <mat-tab-group  style="background-color: rgba(238, 238, 238, 0.438);">
                        <mat-tab label="Detalle Pedido"> 

                        
                            <table mat-table [dataSource]="datos.productos" class="mat-elevation-z8 text-center">
                                <ng-container matColumnDef="imagen">
                                    <th mat-header-cell *matHeaderCellDef>Producto</th>
                                    <td mat-cell *matCellDef="let producto">
                                        <img *ngIf="producto.producto.imagenes[0].imagen; else imagePath" [src]="getBase64FromBytes(producto.producto.imagenes[0].imagen.data)" height="100" width="150" alt="...">
                                      <ng-template #imagePath>
                                        <img src="./assets/img/default.jpg" height="100" width="150" alt="...">
                                      </ng-template> 
                                    </td>
                                </ng-container>
                                
                                <ng-container matColumnDef="producto">
                                <th mat-header-cell *matHeaderCellDef>Descripción</th>
                                <td mat-cell *matCellDef="let producto">{{ producto.producto.descripcion }}</td>
                                </ng-container>
                                <ng-container matColumnDef="proveedor">
                                    <th mat-header-cell *matHeaderCellDef>Proveedor</th>
                                    <td mat-cell *matCellDef="let producto">{{ producto.producto.proveedor.proveedor }}</td>
                                    </ng-container>
                                <ng-container matColumnDef="cantidad">
                                <th mat-header-cell *matHeaderCellDef>Cantidad</th>
                                <td mat-cell *matCellDef="let producto">{{ producto.cantidad }}</td>
                                </ng-container>
                                <ng-container matColumnDef="precioUnitario">
                                <th mat-header-cell *matHeaderCellDef>Precio Unitario</th>
                                <td mat-cell *matCellDef="let producto">{{ producto.precioUnitario | currency:"USD" }}</td>
                                </ng-container>
                                <ng-container matColumnDef="subTotal">
                                <th mat-header-cell *matHeaderCellDef>Subtotal</th>
                                <td mat-cell *matCellDef="let producto">{{ producto.subTotal | currency:"USD" }}</td>
                                </ng-container>
                
                                <ng-container matColumnDef="estado">
                                <th mat-header-cell *matHeaderCellDef>Estado</th>
                                <td mat-cell *matCellDef="let producto"><span style="padding:5px 10px 5px 10px; border-radius: 8px;margin-left: 8px;" [ngStyle]="{'background-color': getBackgroundColor(producto.estado)}">{{ producto.estado }}</span></td>
                                </ng-container>
                                <ng-container matColumnDef="accion">
                                    <th mat-header-cell *matHeaderCellDef></th>
                                    <td mat-cell *matCellDef="let producto">
                                        <a mat-fab class="custom" *ngIf="producto.estado=='Pendiente' && currentUser.rol==2">
                                            <mat-icon style="font-size: 25px;">task_alt</mat-icon>
                                          </a>
                                    </td>
                                </ng-container>
                                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                            </table>


                        </mat-tab>
                    </mat-tab-group>
                </div>
                 </mat-card>

            </mat-tab>
        </mat-tab-group>

        
       
    </mat-card-content>

</mat-card>
 